{"status":{},"spec":{"name":"ACI-Informatica-Nginx_Proxy_Postgres","description":"","resources":{"service_definition_list":[{"name":"Nginx","description":"","variable_list":[],"action_list":[{"type":"system","name":"action_create","description":"System action for creating an application","runbook":{"name":"5ff8ae58_runbook","description":"","task_definition_list":[{"type":"DAG","name":"2caa02f6_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"2caa02f6_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_delete","description":"System action for deleting an application. Deletes created VMs as well","runbook":{"name":"c1ce3054_runbook","description":"","task_definition_list":[{"type":"DAG","name":"8f1e2760_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"8f1e2760_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_start","description":"System action for starting an application","runbook":{"name":"0c2d3617_runbook","description":"","task_definition_list":[{"type":"DAG","name":"ac3f8ce2_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"ac3f8ce2_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_stop","description":"System action for stopping an application","runbook":{"name":"a5eba7ef_runbook","description":"","task_definition_list":[{"type":"DAG","name":"d3486691_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"d3486691_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_restart","description":"System action for restarting an application","runbook":{"name":"242d70dc_runbook","description":"","task_definition_list":[{"type":"DAG","name":"0e54633f_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"0e54633f_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"depends_on_list":[{"kind":"app_service","name":"PostgreSQL"}],"port_list":[],"singleton":false,"tier":""},{"name":"HA_proxy","description":"","variable_list":[],"action_list":[{"type":"system","name":"action_create","description":"System action for creating an application","runbook":{"name":"6922dcae_runbook","description":"","task_definition_list":[{"type":"DAG","name":"ea1e7da9_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"ea1e7da9_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_delete","description":"System action for deleting an application. Deletes created VMs as well","runbook":{"name":"e4689edf_runbook","description":"","task_definition_list":[{"type":"DAG","name":"af83ba4b_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"af83ba4b_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_start","description":"System action for starting an application","runbook":{"name":"e3c185d3_runbook","description":"","task_definition_list":[{"type":"DAG","name":"b753733a_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"b753733a_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_stop","description":"System action for stopping an application","runbook":{"name":"4c7a5f0e_runbook","description":"","task_definition_list":[{"type":"DAG","name":"0d14daa5_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"0d14daa5_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_restart","description":"System action for restarting an application","runbook":{"name":"02ccc3f4_runbook","description":"","task_definition_list":[{"type":"DAG","name":"d9097fb8_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"d9097fb8_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"depends_on_list":[{"kind":"app_service","name":"Nginx"}],"port_list":[],"singleton":false,"tier":""},{"name":"PostgreSQL","description":"","variable_list":[],"action_list":[{"type":"system","name":"action_create","description":"System action for creating an application","runbook":{"name":"dc440447_runbook","description":"","task_definition_list":[{"type":"DAG","name":"8aa78581_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"8aa78581_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_delete","description":"System action for deleting an application. Deletes created VMs as well","runbook":{"name":"5853e6e1_runbook","description":"","task_definition_list":[{"type":"DAG","name":"d34e4e32_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"d34e4e32_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_start","description":"System action for starting an application","runbook":{"name":"230b3f1a_runbook","description":"","task_definition_list":[{"type":"DAG","name":"529394a0_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"529394a0_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_stop","description":"System action for stopping an application","runbook":{"name":"b7b68702_runbook","description":"","task_definition_list":[{"type":"DAG","name":"2385d662_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"2385d662_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_restart","description":"System action for restarting an application","runbook":{"name":"0f33dd61_runbook","description":"","task_definition_list":[{"type":"DAG","name":"b31cdc06_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"b31cdc06_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"depends_on_list":[],"port_list":[],"singleton":false,"tier":""}],"published_service_definition_list":[],"substrate_definition_list":[{"type":"AHV_VM","name":"VM1","description":"","variable_list":[],"action_list":[],"create_spec":{"type":"","name":"Nginx_Server_@@{calm_array_index}@@-@@{calm_blueprint_name}@@","availability_zone_reference":null,"backup_policy":null,"cluster_reference":{"type":"","kind":"cluster","name":"PHX-POC328","uuid":"00062820-1c38-9b8f-0000-000000010979"},"resources":{"type":"","nic_list":[{"type":"","nic_type":"NORMAL_NIC","subnet_reference":{"type":"","kind":"subnet","name":"","uuid":"342dbf72-2de7-49bd-8ff4-2133ae2cbbb5"},"network_function_nic_type":"INGRESS","mac_address":"","ip_endpoint_list":[],"network_function_chain_reference":null,"vpc_reference":null}],"power_state":"ON","guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"memory_size_mib":5120,"gpu_list":[],"parent_reference":null,"hardware_clock_timezone":"","account_uuid":"a976aaf3-8375-46c0-8074-a40c8dd635ea","guest_customization":{"type":"","cloud_init":{"type":"","meta_data":"","user_data":"#cloud-config\nssh_pwauth: True\nusers:\n  - name: @@{Ubuntu.username}@@\n    ssh-authorized-keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAii7qFDhVadLx5lULAG\/ooCUTA\/ATSmXbArs+GdHxbUWd\/bNGZCXnaQ2L1mSVVGDxfTbSaTJ3En3tVlMtD2RjZPdhqWESCaoj2kXLYSiNDS9qz3SK6h822je\/f9O9CzCTrw2XGhnDVwmNraUvO5wmQObCDthTXc72PcBOd6oa4ENsnuY9HtiETg29TZXgCYPFXipLBHSZYkBmGgccAeY9dq5ywiywBJLuoSovXkkRJk3cd7GyhCRIwYzqfdgSmiAMYgJLrz\/UuLxatPqXts2D8v1xqR9EPNZNzgd4QHK4of1lqsNRuz2SxkwqLcXSw0mGcAL8mIwVpzhPzwmENC5Orw== rsa-key-20190108\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: | \n    @@{Ubuntu.username}@@:nutanix\/4u\n  expire: False\n\n"},"sysprep":null},"boot_config":{"type":"","boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"mac_address":"","boot_type":"LEGACY"},"disk_list":[{"type":"","data_source_reference":{"type":"","kind":"image","name":"ubuntu-22.04-server-cloudimg-amd64.img","uuid":"ceb0abae-f49a-4b2f-9f38-1941d792e9da"},"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"},"disk_size_mib":2252}],"serial_port_list":[]},"categories":{"Calm-Workshop":"ACI-Informatica-Nginx Server"}},"os_type":"Linux","readiness_probe":{"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"},"connection_type":"SSH","connection_port":22,"delay_secs":"5","retries":"5","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","disable_readiness_probe":false,"connection_protocol":""}},{"type":"AHV_VM","name":"VM2","description":"","variable_list":[],"action_list":[{"type":"fragment","name":"post_action_create","description":"","runbook":{"name":"ead48b1d_runbook","description":"","task_definition_list":[{"type":"DAG","name":"8ce4693c_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"VM2","kind":"app_substrate"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"8ce4693c_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"create_spec":{"type":"","name":"HA_proxy-@@{calm_array_index}@@-@@{calm_blueprint_name}@@","availability_zone_reference":null,"backup_policy":null,"cluster_reference":{"type":"","kind":"cluster","name":"PHX-POC328","uuid":"00062820-1c38-9b8f-0000-000000010979"},"resources":{"type":"","nic_list":[{"type":"","nic_type":"NORMAL_NIC","subnet_reference":{"type":"","kind":"subnet","name":"","uuid":"342dbf72-2de7-49bd-8ff4-2133ae2cbbb5"},"network_function_nic_type":"INGRESS","mac_address":"","ip_endpoint_list":[],"network_function_chain_reference":null,"vpc_reference":null}],"power_state":"ON","guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"memory_size_mib":5120,"gpu_list":[],"parent_reference":null,"hardware_clock_timezone":"","account_uuid":"a976aaf3-8375-46c0-8074-a40c8dd635ea","guest_customization":{"type":"","cloud_init":{"type":"","meta_data":"","user_data":"#cloud-config\nssh_pwauth: True\nusers:\n  - name: @@{Ubuntu.username}@@\n    ssh-authorized-keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAii7qFDhVadLx5lULAG\/ooCUTA\/ATSmXbArs+GdHxbUWd\/bNGZCXnaQ2L1mSVVGDxfTbSaTJ3En3tVlMtD2RjZPdhqWESCaoj2kXLYSiNDS9qz3SK6h822je\/f9O9CzCTrw2XGhnDVwmNraUvO5wmQObCDthTXc72PcBOd6oa4ENsnuY9HtiETg29TZXgCYPFXipLBHSZYkBmGgccAeY9dq5ywiywBJLuoSovXkkRJk3cd7GyhCRIwYzqfdgSmiAMYgJLrz\/UuLxatPqXts2D8v1xqR9EPNZNzgd4QHK4of1lqsNRuz2SxkwqLcXSw0mGcAL8mIwVpzhPzwmENC5Orw== rsa-key-20190108\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: | \n    @@{Ubuntu.username}@@:nutanix\/4u\n  expire: False\n\n"},"sysprep":null},"boot_config":{"type":"","boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"mac_address":"","boot_type":"LEGACY"},"disk_list":[{"type":"","data_source_reference":{"type":"","kind":"image","name":"ubuntu-22.04-server-cloudimg-amd64.img","uuid":"ceb0abae-f49a-4b2f-9f38-1941d792e9da"},"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"},"disk_size_mib":20480}],"serial_port_list":[]},"categories":{}},"os_type":"Linux","readiness_probe":{"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"},"connection_type":"SSH","connection_port":22,"delay_secs":"5","retries":"5","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","disable_readiness_probe":false,"connection_protocol":""}},{"type":"AHV_VM","name":"VM3","description":"","variable_list":[],"action_list":[],"editables":{"create_spec":{"resources":{"num_sockets":true,"num_vcpus_per_socket":true,"memory_size_mib":true}}},"create_spec":{"type":"","name":"PostgreSQL-@@{calm_array_index}@@-@@{calm_blueprint_name}@@","availability_zone_reference":null,"backup_policy":null,"cluster_reference":{"type":"","kind":"cluster","name":"PHX-POC328","uuid":"00062820-1c38-9b8f-0000-000000010979"},"resources":{"type":"","nic_list":[{"type":"","nic_type":"NORMAL_NIC","subnet_reference":{"type":"","kind":"subnet","name":"","uuid":"342dbf72-2de7-49bd-8ff4-2133ae2cbbb5"},"network_function_nic_type":"INGRESS","mac_address":"","ip_endpoint_list":[],"network_function_chain_reference":null,"vpc_reference":null}],"power_state":"ON","guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"memory_size_mib":4096,"gpu_list":[],"parent_reference":null,"hardware_clock_timezone":"","account_uuid":"a976aaf3-8375-46c0-8074-a40c8dd635ea","guest_customization":{"type":"","cloud_init":{"type":"","meta_data":"","user_data":"#cloud-config\nusers:\n  - name: @@{Ubuntu.username}@@\n    ssh-authorized-keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAii7qFDhVadLx5lULAG\/ooCUTA\/ATSmXbArs+GdHxbUWd\/bNGZCXnaQ2L1mSVVGDxfTbSaTJ3En3tVlMtD2RjZPdhqWESCaoj2kXLYSiNDS9qz3SK6h822je\/f9O9CzCTrw2XGhnDVwmNraUvO5wmQObCDthTXc72PcBOd6oa4ENsnuY9HtiETg29TZXgCYPFXipLBHSZYkBmGgccAeY9dq5ywiywBJLuoSovXkkRJk3cd7GyhCRIwYzqfdgSmiAMYgJLrz\/UuLxatPqXts2D8v1xqR9EPNZNzgd4QHK4of1lqsNRuz2SxkwqLcXSw0mGcAL8mIwVpzhPzwmENC5Orw== rsa-key-20190108\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    @@{Ubuntu.username}@@:nutanix\/4u\n  expire: False\n"},"sysprep":null},"boot_config":{"type":"","boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"mac_address":"","boot_type":"LEGACY"},"disk_list":[{"type":"","data_source_reference":{"type":"","kind":"image","name":"ubuntu-22.04-server-cloudimg-amd64.img","uuid":"ceb0abae-f49a-4b2f-9f38-1941d792e9da"},"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"},"disk_size_mib":20480}],"serial_port_list":[]},"categories":{}},"os_type":"Linux","readiness_probe":{"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"},"connection_type":"SSH","connection_port":22,"delay_secs":"5","retries":"5","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","disable_readiness_probe":false,"connection_protocol":""}}],"package_definition_list":[{"type":"DEB","name":"Package1","description":"","variable_list":[],"action_list":[],"service_local_reference_list":[{"name":"Nginx","kind":"app_service"}],"version":"","options":{"type":"","install_runbook":{"name":"3e845c97_runbook","description":"","task_definition_list":[{"type":"DAG","name":"f3a5ac36_dag","description":"","attrs":{"type":"","edges":[{"type":"","from_task_reference":{"name":"Install_Nginx","kind":"app_task"},"to_task_reference":{"name":"Update_index_Page","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"Update_index_Page","kind":"app_task"},"to_task_reference":{"name":"Send Mail","kind":"app_task"},"edge_type":"user_defined"}]},"child_tasks_local_reference_list":[{"name":"Install_Nginx","kind":"app_task"},{"name":"Send Mail","kind":"app_task"},{"name":"Update_index_Page","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"Package1","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Install_Nginx","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n## Update package lists and install Apache2 and PHP\nsudo apt update -y\nsudo apt install -y nginx\n\n## Configure PHP module in Apache\n\n## Restart Apache service\nsudo systemctl start nginx\nsudo systemctl enable nginx\nnginx -v\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Send Mail","description":"","attrs":{"type":"","script":"  # Ensure the `urlreq` function is correctly imported from wherever it's defined\nusername = \"@@{PrismCentral.username}@@\"\nusername_secret = \"@@{PrismCentral.secret}@@\"\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\nurl3=\"https:\/\/@@{pc_ip}@@:9440\/PrismGateway\/services\/rest\/v1\/cluster\/send_email\"\nrecipient = \"@@{EMAIL_ID}@@\"\nSubject = \"ACI Informatica Servers creation\"\nbody = \"\"\"Dear @@{calm_username}@@,\n\nYour Nginx VM creation from Blueprint = @@{calm_blueprint_name}@@ has been completed successfully !! \n\n\n\nVM Name: @@{VM1.name}@@\n\nIP Address(s): @@{VM1.address}@@\n\nUsername: root\nPassword: nutanix\/4u (Please change password after 1st Login)\n\nBlueprint Name: @@{calm_blueprint_name}@@\n\nApplication Name: @@{calm_application_name}@@\n\nCluster Name: @@{platform.status.cluster_reference.name}@@.\n\nCalm_Project: @@{calm_project_name}@@\n\n\n\nRegards\nCALM TEAM\"\"\"\n\n# Updated params2 structure based on the provided data\nparams2 =  {\n    \"recipients\": [\"@@{EMAIL_ID}@@\"],\n    \"subject\": Subject ,\n    \"text\": body\n    }\n\n\n# Send the second POST request\nr = urlreq(url3, verb='POST', headers=headers, params=json.dumps(params2), auth='BASIC', user=username, passwd=username_secret, verify=False)\nif (r.ok):\n  print(\"MAIL Sent Successfully\")\n\n  ","script_type":"static_py3","command_line_args":"","exit_status":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Update_index_Page","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n# Step 1: Get the Nginx version\n# Get the Nginx version\nnginx_version=$(nginx -v 2>&1 | cut -d '\/' -f 2)\n\n# Step 1: Create the \/var\/www\/html directory if it doesn't exist\nsudo mkdir -p \/var\/www\/html\n\n# Create the index.html file with the Nginx version included\necho \"Creating \/var\/www\/html\/index.html with default content...\"\nsudo bash -c \"cat > \/var\/www\/html\/index.html <<EOF\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n      margin: 0;\n      font-family: Arial, sans-serif;\n      text-align: center;\n      background-color: #f5f5f5;\n    }\n    img {\n      max-width: 200px;\n      height: auto;\n      margin-bottom: 20px;\n    }\n  <\/style>\n<\/head>\n<body>\n  <div>\n    <img src='https:\/\/portaleacquisti.aci.it\/aciinformatica\/images\/logo.aci.informatica.png' alt='ACI INFORMATICA  Logo' \/>\n    <h1>!! Welcome to ACI INFORMATICA  !!<\/h1>\n    <p>Current Initial Version of Nginx deployed on this Server<\/p>\n    <p>Nginx Version: $nginx_version<\/p>\n  <\/div>\n<\/body>\n<\/html>\nEOF\"\n\n\n# Step 3: Modify the Nginx configuration file\necho \"Configuring Nginx to serve from \/var\/www\/html...\"\nsudo bash -c 'cat > \/etc\/nginx\/conf.d\/default.conf <<EOF\nserver {\n    listen 80;\n    server_name _;\n\n    root \/var\/www\/html;\n    index index.html;\n\n    location \/ {\n        try_files \\$uri \\$uri\/ =404;\n    }\n}\nEOF'\n\n# Step 4: Disable the default Nginx site configuration\necho \"Disabling the default Nginx site configuration...\"\nsudo rm -f \/etc\/nginx\/sites-enabled\/default\n\n# Step 5: Reload Nginx to apply the changes\necho \"Reloading Nginx service...\"\nsudo systemctl reload nginx\n\n# Step 6: Output completion message\necho \"Nginx is now configured to serve content from \/var\/www\/html.\"\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"f3a5ac36_dag","kind":"app_task"},"variable_list":[]},"uninstall_runbook":{"name":"7c8f56c4_runbook","description":"","task_definition_list":[{"type":"DAG","name":"502c71ef_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[{"name":"Task 1","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"Package1","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Task 1","description":"","attrs":{"type":"","script":"#!\/bin\/bash\necho \"goodbye!\"","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"502c71ef_dag","kind":"app_task"},"variable_list":[]},"upgrade_runbook":{}}},{"type":"DEB","name":"Package2","description":"","variable_list":[],"action_list":[],"service_local_reference_list":[{"name":"HA_proxy","kind":"app_service"}],"version":"","options":{"type":"","install_runbook":{"name":"39106adb_runbook","description":"","task_definition_list":[{"type":"DAG","name":"037cd072_dag","description":"","attrs":{"type":"","edges":[{"type":"","from_task_reference":{"name":"Install_HA_Proxy","kind":"app_task"},"to_task_reference":{"name":"Send_Mail","kind":"app_task"},"edge_type":"user_defined"}]},"child_tasks_local_reference_list":[{"name":"Install_HA_Proxy","kind":"app_task"},{"name":"Send_Mail","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"Package2","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Install_HA_Proxy","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n## Variable Initialization\nNginx_IP_LIST=\"@@{VM1.address}@@\"\n\n## Install HAProxy Packages\nport=80\nsudo apt update -y\nsudo apt install -y haproxy\n\nhaproxy -v\n\n## Generate HAProxy Configuration\ncat <<EOF | sudo tee \/etc\/haproxy\/haproxy.cfg\nglobal\n  log 127.0.0.1 local0\n  log 127.0.0.1 local1 notice\n  maxconn 4096\n  quiet\n  user haproxy\n  group haproxy\n\ndefaults\n  log     global\n  mode    http\n  retries 3\n  timeout client 50s\n  timeout connect 5s\n  timeout server 50s\n  option dontlognull\n  option httplog\n  option redispatch\n  balance roundrobin\n\nfrontend http\n  bind 0.0.0.0:80\n  default_backend servers-http\n\nbackend servers-http\nEOF\n\n## Configure Nginx server IP list in HAProxy conf\nhosts=$(echo \"${Nginx_IP_LIST}\" | sed 's\/^,\/\/' | sed 's\/,$\/\/' | tr \",\" \"\\n\")\nfor host in $hosts\ndo\n   echo \"  server host-${host} ${host}:${port} weight 1 maxconn 100 check\" | sudo tee -a \/etc\/haproxy\/haproxy.cfg\ndone\n\n## Add HAProxy stats and admin listener to the configuration\ncat <<EOF | sudo tee -a \/etc\/haproxy\/haproxy.cfg\n\nlisten stats\n  bind 0.0.0.0:8080\n  mode http\n  log global\n  stats enable\n  stats hide-version\n  stats refresh 30s\n  stats show-node\n  stats uri \/stats\n\nlisten admin\n  bind 127.0.0.1:22002\n  mode http\n  stats uri \/\nEOF\n\n## Enable and Restart HAProxy service\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy\n\necho \"HAProxy installation and configuration complete. Access HAProxy stats at http:\/\/your_server_ip:8080\/stats and admin at http:\/\/localhost:22002.\"\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Send_Mail","description":"","attrs":{"type":"","script":"  # Ensure the `urlreq` function is correctly imported from wherever it's defined\nusername = \"@@{PrismCentral.username}@@\"\nusername_secret = \"@@{PrismCentral.secret}@@\"\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\nurl3=\"https:\/\/@@{pc_ip}@@:9440\/PrismGateway\/services\/rest\/v1\/cluster\/send_email\"\nrecipient = \"@@{EMAIL_ID}@@\"\nSubject = \"ACI Informatica Servers creation\"\nbody = \"\"\"Dear @@{calm_username}@@,\n\nYour HA_Proxy LB VM creation from Blueprint = @@{calm_blueprint_name}@@ has been completed successfully !! \n\n\n\nVM Name: @@{VM2.name}@@\n\nIP Address(s): @@{VM2.address}@@\n\nUsername: root\nPassword: nutanix\/4u (Please change password after 1st Login)\n\nBlueprint Name: @@{calm_blueprint_name}@@\n\nApplication Name: @@{calm_application_name}@@\n\nCluster Name: @@{platform.status.cluster_reference.name}@@.\n\nCalm_Project: @@{calm_project_name}@@\n\n\n\nRegards\nCALM TEAM\"\"\"\n\n# Updated params2 structure based on the provided data\nparams2 =  {\n    \"recipients\": [\"@@{EMAIL_ID}@@\"],\n    \"subject\": Subject ,\n    \"text\": body\n    }\n\n\n# Send the second POST request\nr = urlreq(url3, verb='POST', headers=headers, params=json.dumps(params2), auth='BASIC', user=username, passwd=username_secret, verify=False)\nif (r.ok):\n  print(\"MAIL Sent Successfully\")\n\n  ","script_type":"static_py3","command_line_args":"","exit_status":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"HA_proxy","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"037cd072_dag","kind":"app_task"},"variable_list":[]},"uninstall_runbook":{"name":"86bcc01b_runbook","description":"","task_definition_list":[{"type":"DAG","name":"c8ab7613_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Package2","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"c8ab7613_dag","kind":"app_task"},"variable_list":[]},"upgrade_runbook":{}}},{"type":"DEB","name":"Package3","description":"","variable_list":[],"action_list":[],"service_local_reference_list":[{"name":"PostgreSQL","kind":"app_service"}],"version":"","options":{"type":"","install_runbook":{"name":"74638dad_runbook","description":"","task_definition_list":[{"type":"DAG","name":"c63a2d9f_dag","description":"","attrs":{"type":"","edges":[{"type":"","from_task_reference":{"name":"Install_PostgreSQL","kind":"app_task"},"to_task_reference":{"name":"Create_User","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"Create_User","kind":"app_task"},"to_task_reference":{"name":"Create_DB","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"Create_DB","kind":"app_task"},"to_task_reference":{"name":"Verify_Configs","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"Verify_Configs","kind":"app_task"},"to_task_reference":{"name":"Send_Mail","kind":"app_task"},"edge_type":"user_defined"}]},"child_tasks_local_reference_list":[{"name":"Install_PostgreSQL","kind":"app_task"},{"name":"Create_User","kind":"app_task"},{"name":"Create_DB","kind":"app_task"},{"name":"Verify_Configs","kind":"app_task"},{"name":"Send_Mail","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"Package3","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Install_PostgreSQL","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n# Update package list\necho \"Updating package list...\"\nsudo apt update -y\n\n# Install PostgreSQL and its client\necho \"Installing PostgreSQL...\"\nsudo apt install -y postgresql postgresql-client\n\n# Start and enable PostgreSQL service\necho \"Starting and enabling PostgreSQL service...\"\nsudo systemctl start postgresql\nsudo systemctl enable postgresql\n\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Create_User","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n# Variables for PostgreSQL user and database creation\nPGUSER=@@{PostgreSQLCreds.username}@@       # Replace with the desired username\nPGPASSWORD=@@{PostgreSQLCreds.secret}@@  # Replace with the desired password\nDB_NAME=@@{Database_name}@@   # Replace with the desired database name\n\n# Function to create a PostgreSQL user\ncreate_pg_user() {\n  echo \"Creating PostgreSQL user...\"\n\n  # Run the commands as the postgres user\n  sudo -i -u postgres psql <<EOF\nCREATE USER $PGUSER WITH PASSWORD '$PGPASSWORD';\nALTER USER $PGUSER CREATEDB;\nALTER USER $PGUSER WITH SUPERUSER;\nEOF\n\n  echo \"PostgreSQL user created successfully.\"\n}\n\n# Create the PostgreSQL user\ncreate_pg_user\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Create_DB","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n# Variables for PostgreSQL user creation\nPGUSER=\"@@{PostgreSQLCreds.username}@@\"   # Replace with the desired username\nPGPASSWORD=\"@@{PostgreSQLCreds.secret}@@\" # Replace with the desired password\nDB_NAME=\"@@{Database_name}@@\"             # Replace with the desired database name\n\n# Export PostgreSQL environment variables for authentication\nexport PGUSER=$PGUSER\nexport PGPASSWORD=$PGPASSWORD\n\n# Function to create PostgreSQL database\ncreate_pg_database() {\n  echo \"Creating PostgreSQL database and granting privileges to user '$PGUSER'...\"\n\n  # Run the SQL commands to create the database and grant privileges\n  sudo -i -u postgres psql<<EOF\n    CREATE DATABASE $DB_NAME;\n    GRANT ALL PRIVILEGES ON DATABASE $DB_NAME TO @@{PostgreSQLCreds.username}@@;\n    ALTER DATABASE $DB_NAME OWNER TO @@{PostgreSQLCreds.username}@@;\nEOF\n\n  echo \"Database '$DB_NAME' created successfully and privileges granted to '$PGUSER'.\"\n}\n\n\n# Ensure PostgreSQL service is running\nif ! systemctl is-active --quiet postgresql; then\n  echo \"PostgreSQL service is not running. Please start it and try again.\"\n  exit 1\nfi\n\n# Create the PostgreSQL database\ncreate_pg_database\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Verify_Configs","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\nPGUSER=\"postgres\"\ngetent passwd @@{PostgreSQLCreds.username}@@\n\nsudo -i -u \"$PGUSER\" psql<<EOF\n    \\l+\n    \\du\nEOF\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Send_Mail","description":"","attrs":{"type":"","script":"  # Ensure the `urlreq` function is correctly imported from wherever it's defined\nusername = \"@@{PrismCentral.username}@@\"\nusername_secret = \"@@{PrismCentral.secret}@@\"\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\nurl3=\"https:\/\/@@{pc_ip}@@:9440\/PrismGateway\/services\/rest\/v1\/cluster\/send_email\"\nrecipient = \"@@{EMAIL_ID}@@\"\nSubject = \"ACI Informatica Servers creation\"\nbody = \"\"\"Dear @@{calm_username}@@,\n\nYour PostgreSQL Database VM creation from Blueprint = @@{calm_blueprint_name}@@ has been completed successfully !! \n\n\n\nVM Name: @@{VM3.name}@@\n\nIP Address(s): @@{VM3.address}@@\n\nUsername: root\nPassword: nutanix\/4u (Please change password after 1st Login)\n\nBlueprint Name: @@{calm_blueprint_name}@@\n\nApplication Name: @@{calm_application_name}@@\n\nCluster Name: @@{platform.status.cluster_reference.name}@@.\n\nCalm_Project: @@{calm_project_name}@@\n\nUser Created: @@{PostgreSQLCreds.username}@@\n\nDatabase Created: @@{Database_name}@@\n\n\n\nRegards\nCALM TEAM\"\"\"\n\n# Updated params2 structure based on the provided data\nparams2 =  {\n    \"recipients\": [\"@@{EMAIL_ID}@@\"],\n    \"subject\": Subject ,\n    \"text\": body\n    }\n\n\n# Send the second POST request\nr = urlreq(url3, verb='POST', headers=headers, params=json.dumps(params2), auth='BASIC', user=username, passwd=username_secret, verify=False)\nif (r.ok):\n  print(\"MAIL Sent Successfully\")\n\n  ","script_type":"static_py3","command_line_args":"","exit_status":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"PostgreSQL","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"c63a2d9f_dag","kind":"app_task"},"variable_list":[]},"uninstall_runbook":{"name":"1541de48_runbook","description":"","task_definition_list":[{"type":"DAG","name":"67c80d30_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Package3","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"67c80d30_dag","kind":"app_task"},"variable_list":[]},"upgrade_runbook":{}}}],"app_profile_list":[{"name":"Default","description":"","variable_list":[{"type":"LOCAL","name":"Database_name","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"moehpoc"},{"type":"LOCAL","name":"EMAIL_ID","description":"","regex":{"value":"^.*$","should_validate":false},"options":{"type":"PREDEFINED","choices":[]},"is_hidden":false,"is_mandatory":true,"data_type":"BASE","val_type":"STRING","label":"Enter Email to send Deployment Confirmation Mail","attrs":{"type":""},"editables":{"value":true},"value":""},{"type":"LOCAL","name":"pc_ip","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":"10.38.100.7"}],"action_list":[{"type":"user","name":"Nginx_Upgrade","description":"","runbook":{"name":"5b042c92_runbook","description":"","task_definition_list":[{"type":"DAG","name":"ffb4593b_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[{"name":"Nginx_Upgrade","kind":"app_task"}],"variable_list":[],"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Nginx_Upgrade","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\n# Stop Nginx and backup the configuration\nsudo systemctl stop nginx\nsudo cp -r \/etc\/nginx \/etc\/nginx-backup\n\n# Add the Nginx PPA without user interaction (for the mainline version)\nsudo add-apt-repository -y ppa:ondrej\/nginx-mainline\n\n# Update the package list\nsudo apt update -y\n\n# Install the specific version of Nginx using the correct package\nsudo apt upgrade -y nginx\n\n# Enable and start Nginx\nsudo systemctl enable nginx\nsudo systemctl start nginx\n\n# Verify Nginx configuration\nsudo nginx -t\n\n# Display the Nginx version\nnginx -v\napt list -a nginx\n\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"ffb4593b_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"user","name":"Nginx_Stress_Test","description":"","runbook":{"name":"fec1b6a5_runbook","description":"","task_definition_list":[{"type":"DAG","name":"aa5cc50c_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[{"name":"Nginx_Stress_test","kind":"app_task"}],"variable_list":[],"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"Nginx_Stress_test","description":"","attrs":{"type":"","script":"#!\/bin\/bash\n\nsudo apt update -y\nsudo apt install stress -y\n\n# CPU cores to stress (usually 90% of available cores)\ncpu_cores=$(nproc)\ncpu_load=$(awk \"BEGIN {print int($cpu_cores * 0.9)}\")\n\n# Memory to stress (90% of available memory)\ntotal_memory=$(grep MemTotal \/proc\/meminfo | awk '{print $2}')\nmemory_load=$(awk \"BEGIN {print int($total_memory * 0.9)}\")\n\n# Stress CPU and memory for 1 hour (3600 seconds)\necho \"Stressing CPU with $cpu_load cores and stressing memory with $memory_load KB for 1 hour...\"\n\n# Run the stress command to utilize CPU and memory\nstress --cpu \"$cpu_load\" --vm 1 --vm-bytes \"${memory_load}K\" --timeout 3600s\n\necho \"Stress test completed.\"\n","script_type":"sh","command_line_args":"","exit_status":[],"login_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"}},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Nginx","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"aa5cc50c_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"user","name":"Nginx_Scale_Out","description":"","runbook":{"name":"93f82cef_runbook","description":"","task_definition_list":[{"type":"DAG","name":"052406de_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[{"name":"Nginx_Scale_Out","kind":"app_task"}],"variable_list":[],"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SCALING","name":"Nginx_Scale_Out","description":"","attrs":{"type":"","scaling_type":"SCALEOUT","scaling_count":"1"},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"08eff15d_deployment","kind":"app_blueprint_deployment"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"052406de_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"deployment_create_list":[{"type":"GREENFIELD","name":"08eff15d_deployment","description":"","variable_list":[],"action_list":[],"depends_on_list":[],"min_replicas":"1","max_replicas":"100","default_replicas":"1","package_local_reference_list":[{"name":"Package1","kind":"app_package"}],"substrate_local_reference":{"name":"VM1","kind":"app_substrate"},"published_service_local_reference_list":[]},{"type":"GREENFIELD","name":"54b80c22_deployment","description":"","variable_list":[],"action_list":[],"depends_on_list":[],"min_replicas":"1","max_replicas":"4","default_replicas":"1","package_local_reference_list":[{"name":"Package2","kind":"app_package"}],"substrate_local_reference":{"name":"VM2","kind":"app_substrate"},"published_service_local_reference_list":[]},{"type":"GREENFIELD","name":"3bb77959_deployment","description":"","variable_list":[],"action_list":[],"depends_on_list":[],"min_replicas":"1","max_replicas":"1","default_replicas":"1","package_local_reference_list":[{"name":"Package3","kind":"app_package"}],"substrate_local_reference":{"name":"VM3","kind":"app_substrate"},"published_service_local_reference_list":[]}],"snapshot_config_list":[],"restore_config_list":[],"environment_reference_list":[],"application_url":"","patch_list":[]}],"credential_definition_list":[{"type":"KEY","name":"Ubuntu","description":"","username":"root","secret":{"attrs":{"secret_reference":{},"is_secret_modified":false}},"cred_class":"static"},{"type":"PASSWORD","name":"PostgreSQLCreds","description":"","editables":{"username":true,"secret":true},"username":"nutanix","secret":{"attrs":{"secret_reference":{},"is_secret_modified":false}},"cred_class":"static"},{"type":"PASSWORD","name":"PrismCentral","description":"","username":"sattwik","secret":{"attrs":{"secret_reference":{},"is_secret_modified":false}},"cred_class":"static"}],"default_credential_local_reference":{"name":"Ubuntu","kind":"app_credential"},"type":"USER","client_attrs":{"08eff15d_deployment":{"y":-163.5,"x":53},"54b80c22_deployment":{"y":-155.75,"x":687.75},"3bb77959_deployment":{"y":-576.875,"x":417.625}}}},"api_version":"3.0","product_version":"4.0.0","metadata":{"last_update_time":"1734535592039553","creation_time":"1733825374861293","spec_version":20,"name":"ACI-Informatica-Nginx_Proxy_Postgres","kind":"blueprint"},"contains_secrets":false}